# ------------------------------------------------------------------------------
# Copyright (C) 2016-2017 DELL EMC Corporation. All Rights Reserved.

# This software contains the intellectual property of DELL EMC Corporation
# or is licensed to DELL EMC Corporation from third parties.  Use of this
# software and the intellectual property contained therein is expressly
# limited to the terms and conditions of the License Agreement under which
# it is provided by or on behalf of DELL  EMC.

# ------------------------------------------------------------------------------

-
    name: '{{ step|default(None) }} - Wait for {{ port }} to be up'
    hosts: '{{ vms }}'
    gather_facts: no
    any_errors_fatal: True
    tasks:
    -
        name: "{{ step }} - Wait for {{ port }} to be up"
        tags:
            - '{{ step }} - Wait for {{ port }} to be up'
        delegate_to: localhost
        wait_for:
            host: '{{ ansible_host }}'
            port: '{{ port }}'
            state: started
            timeout: 1800