# ------------------------------------------------------------------------------
# Copyright (C) 2016-2017 DELL EMC Corporation. All Rights Reserved.

# This software contains the intellectual property of DELL EMC Corporation
# or is licensed to DELL EMC Corporation from third parties.  Use of this
# software and the intellectual property contained therein is expressly
# limited to the terms and conditions of the License Agreement under which
# it is provided by or on behalf of DELL  EMC.

# ------------------------------------------------------------------------------

---
-
    include: plays/power-off-vms.yml
    vars:
        step: BKP - BPB-650-010
        vms: log_insight_servers:log_insight_workers:log_insight_forwarders

-
    include: plays/backup-snapshot.yml
    vars:
        step: BKP - BPB-650-040
        description: 'Configure LogInsight'
        snapshot_name: BPB-650-CONFIGURE-LOGINSIGHT
        snapshot_description: BPB-650-CONFIGURE-LOGINSIGHT
        vms: log_insight_servers:log_insight_workers:log_insight_forwarders
        dumpMemory: True
        powerOffVM: False

-
    include: plays/delete-snapshots-not-matching-name.yml
    vars:
        step: BKP - BPB-650-070
        vms: log_insight_servers:log_insight_workers:log_insight_forwarders
        inventoryPath: '/'
        snapshotName: BPB-650-CONFIGURE-LOGINSIGHT

-
    include: plays/power-on-vms.yml
    vars:
        step: BKP - BPB-650-100
        vms: log_insight_servers:log_insight_workers:log_insight_forwarders

-
    include: plays/poll-vrli.yml
    vars:
        step: BKP - BPB-650-110
        vms: log_insight_servers

-
    include: plays/power-on-vms.yml
    vars:
        step: BKP - BPB-650-120
        vms: log_insight_workers

-
    include: plays/poll-vrli.yml
    vars:
        step: BKP - BPB-650-130
        vms: log_insight_workers

-
    include: plays/power-on-vms.yml
    vars:
        step: BKP - BPB-650-140
        vms: log_insight_forwarders

-
    include: plays/poll-vrli.yml
    vars:
        step: BKP - BPB-650-150
        vms: log_insight_forwarders


