# ------------------------------------------------------------------------------
# Copyright (C) 2016-2017 DELL EMC Corporation. All Rights Reserved.

# This software contains the intellectual property of DELL EMC Corporation
# or is licensed to DELL EMC Corporation from third parties.  Use of this
# software and the intellectual property contained therein is expressly
# limited to the terms and conditions of the License Agreement under which
# it is provided by or on behalf of DELL  EMC.

# ------------------------------------------------------------------------------

---
# Playbook file: vrli.yml

#TODO: Check different passwords - admin password, initial admin password, root password?

-
    include:  ../backup_and_restore/plays/power-on-vms.yml
    vars:
        vms: log_insight,log_insight_forwarders
        step: VRLI - EPB-650-010

-
    include:  plays/poll.yml
    vars:
      vms: log_insight,log_insight_forwarders
      step: VRLI - EPB-650-020

-
    include:  plays/master-appliance-configuration.yml
    vars:
      vms: log_insight,log_insight_forwarders
      step: VRLI - EPB-650-030

-
    include:  ../backup_and_restore/plays/power-on-vms.yml
    vars:
        vms: log_insight_workers
        step: VRLI - EPB-650-040

-
    include:  plays/poll.yml
    vars:
      vms: log_insight_workers
      step: VRLI - EPB-650-050

-
    include:  plays/worker-appliance-configuration.yml
    vars:
      vms: log_insight_workers
      step: VRLI - EPB-650-060

-
    include:  plays/replace-vrli-ssl-certificates.yml
    vars:
      vms: log_insight_workers
      step: VRLI - EPB-650-070

-
    include:  plays/poll.yml
    vars:
      vms: log_insight
      step: VRLI - EPB-650-075

-   include:  plays/vrli-integration.yml

-
    include:  plays/install-vrli-content-packs.yml
    vars:
      vms: log_insight
      step: VRLI - EPB-650-110

-   include: forwarder-configuration.yml

-   include: agent-configuration.yml